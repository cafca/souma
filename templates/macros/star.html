{% macro star(star, author, csrf_token='') %}
<!-- STAR: {{star.id}} -->
<span class="content">
    {% if star.title %}
        <a href="{{ url_for('star', id=star.id) }}">
            <h1>{{ star.title }}</h1>
        </a>
    {% endif %}

    {% if star.text %}
        <p>{{ star.text }}</p>
    {% endif %}
</span>

<span class="meta">
    <span class="attribute">
        <form action="{{ url_for('oneup', star_id=star.id) }}" method="POST">
            <button class="oneup btn btn-mini {% if star.oneupped() %}btn-primary{% else %}btn-inverse{% endif %}" id="oneup-{{star.id}}" type="button">
                <span class="oneup-count" id="oneup-count-{{star.id}}">{{star.oneup_count()}}</span> <i class="fa fa-white fa-arrow-up"></i>
            </button>
        </form>
    </span>

    <span class="attribute">
        <i class="fa fa-asterisk"></i>
        <span class="caption">
            <a href="{{ url_for('star', id=star.id) }}" title="{{star.created}}">{{star.created|naturaltime}}</a>
        </span>
    </span>

    <span class="inline-semantic"> by </span>

    <span class="attribute">
        <i class="fa fa-circle-blank"></i>
        <span class="caption">
            <a href="{{ url_for('persona', id=star.author.id) }}">{{ star.author.username}}</a>
        </span>
    </span>
</span>

<span class="comment">
    <form action="{{ url_for('create_star', parent_id=star.id) }}" method="POST">
        <span class="controls input-prepend">
            <input type="text" name="text" placeholder="write a comment...">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            <input type="hidden" name="author" value="{{ author }}">
            <input type="hidden" name="context" value="">
        </span>

        <span class="attribute">
            <button type="submit" class="btn btn-default">
                <i class="fa fa-comment"></i>
            </button>
        </span>
    </form>
</span>

<span class="meta">
    {% for comment in star.comments%}
        <span class="inline-semantic">
            {% if comment.title %}
                <a href="{{ url_for('star', id=comment.id) }}">
                    <h1>{{ comment.title }}</h1>
                </a>
            {% endif %}

            {% if comment.text %}
                <p>{{ comment.text }}</p>
            {% endif %}
        </span>
    {% endfor %}
</span>
{% endmacro %}
